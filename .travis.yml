language: c
script: bash -ex run_binaries.sh
sudo: true
cache:
  directories:
    - $HOME/.opam
    - $HOME/factory
  before_cache:
    - rm -rf $HOME/.opam/log

addons:
  apt:
    sources:
    - avsm
    packages:
    - camlp4
    - camlp4-extra
    - clang
    - curl
    - libcurl4-gnutls-dev
    - libgmp-dev
    - libssl-dev
    - libzip-dev
    - llvm
    - llvm-3.4-dev
    - m4
    - libpcre3-dev
    - aspcud
    - ocaml
    - ocaml-base
    - ocaml-base-nox
    - ocaml-native-compilers
    - ocaml-nox
    - autoconf
    - libtool
    - protobuf-compiler
    - libprotobuf-dev
    - libboost-filesystem-dev
    - libcrypto++-dev
env:
  - FORK_USER=talex5 FORK_BRANCH=containers OPAMYES=true OCAML_VERSION=latest TESTS=false